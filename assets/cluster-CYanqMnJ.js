import{R as t}from"./RTree-ooJMOIo3.js";import{d as e,o as n,a as o,c as r,b as i}from"./index-CBIm98R_.js";const a=[r('<title>RBush Tree Visualization</title><canvas id="canvas" width="601" height="601" style="border:1px solid #000;"></canvas><br><button id="insert1">Insert 50000</button><button id="insert2">Insert 1000</button><button id="insert3">Bulk-insert 50000</button><button id="insert4">Bulk-insert 1000</button><button id="remove">Remove leftmost 10000</button>',8)],s=e({__name:"cluster",setup:e=>(n((()=>{const e=600,n=document.getElementById("canvas"),o=n.getContext("2d");function randClusterBox(t,e,n){const o=t.x-e+2*e*(Math.random()+Math.random()+Math.random())/3,r=t.y-e+2*e*(Math.random()+Math.random()+Math.random())/3;return{minX:o,minY:r,maxX:o+n*Math.random(),maxY:r+n*Math.random(),item:!0,id:Math.random().toString()}}window.devicePixelRatio>1&&(n.style.width=n.width+"px",n.style.height=n.height+"px",n.width=2*n.width,n.height=2*n.height,o.scale(2,2));const r=["#f40","#0b0","#37f"];let i;function drawTree(t,e){if(!t)return;const n=[];if(n.push(e?r[(t.height-1)%r.length]:"grey"),n.push(e?1/Math.pow(e,1.2):.2),n.push([Math.round(t.minX),Math.round(t.minY),Math.round(t.maxX-t.minX),Math.round(t.maxY-t.minY)]),i.push(n),!t.leaf&&6!==e)for(let o=0;o<t.children.length;o++)drawTree(t.children[o],e+1)}function draw(){i=[],drawTree(a.toJSON(),0),o.clearRect(0,0,e+1,e+1);for(let t=i.length-1;t>=0;t--)o.strokeStyle=i[t][0],o.globalAlpha=i[t][1],o.strokeRect.apply(o,i[t][2])}const a=new t(10);let s=[];function genBulkInsert(t,n){return function(){const o=function genData(t,n,o){const r=[];for(let a=0;a<n;a++){const a={x:(i=o)+Math.random()*(e-2*i),y:i+Math.random()*(e-2*i)},s=Math.min(Math.ceil(t/n),t-r.length);for(let t=0;t<s;t++)r.push(randClusterBox(a,o,1))}var i;return r}(t,n,30);console.time("bulk-insert "+t+" items"),a.load(o),console.timeEnd("bulk-insert "+t+" items"),s=s.concat(o),draw()}}genBulkInsert(1e3,300)(),document.getElementById("insert1").onclick=genBulkInsert(5e4,300),document.getElementById("insert2").onclick=genBulkInsert(1e3,1),document.getElementById("insert3").onclick=genBulkInsert(5e4,300),document.getElementById("insert4").onclick=genBulkInsert(1e3,1),document.getElementById("canvas").onclick=function search(t){console.time("1 pixel search"),a.search({minX:t.clientX,minY:t.clientY,maxX:t.clientX+1,maxY:t.clientY+1}),console.timeEnd("1 pixel search")},document.getElementById("remove").onclick=function remove(){s.sort(a.compareMinX),console.time("remove 10000");for(let t=0;t<1e4;t++)a.remove(s[t]);console.timeEnd("remove 10000"),s.splice(0,1e4),draw()}})),(t,e)=>(i(),o("div",null,a)))});export{s as default};
