import{R as e}from"./RTree-ooJMOIo3.js";import{d as t,o as n,a as o,c as i,b as r}from"./index-CBIm98R_.js";const l=[i('<title>RBush Tree Visualization</title><canvas id="canvas" width="701" height="701"></canvas><br><button id="insert1">Insert 50000</button><button id="insert2">Insert 1000</button><button id="insert3">Bulk-insert 50000</button><button id="insert4">Bulk-insert 1000</button><button id="remove">Remove leftmost 10000</button>',8)],s=t({__name:"uniform",setup:t=>(n((()=>{const t=700,n=document.getElementById("canvas"),o=n.getContext("2d"),i=["#f40","#0b0","#37f"];let r;window.devicePixelRatio>1&&(n.style.width=n.width+"px",n.style.height=n.height+"px",n.width=2*n.width,n.height=2*n.height,o.scale(2,2));const l=new e(10);function randBox(e){const n=Math.random()*(t-e),o=Math.random()*(t-e);return{id:Math.random().toString(),minX:n,minY:o,maxX:n+e*Math.random(),maxY:o+e*Math.random()}}function drawTree(e,t){if(!e)return;const n=[];if(n.push(t?i[(e.height-1)%i.length]:"grey"),n.push(t?1/Math.pow(t,1.2):.2),n.push([Math.round(e.minX),Math.round(e.minY),Math.round(e.maxX-e.minX),Math.round(e.maxY-e.minY)]),r.push(n),!e.leaf&&6!==t)for(let o=0;o<e.children.length;o++)drawTree(e.children[o],t+1)}function draw(){r=[],drawTree(l.toJSON(),0),o.clearRect(0,0,t+1,t+1);for(let e=r.length-1;e>=0;e--)o.strokeStyle=r[e][0],o.globalAlpha=r[e][1],o.strokeRect.apply(o,r[e][2])}function genBulkInsert(e){return function(){const t=function genData(e){const t=[];for(let n=0;n<e;n++)t[n]=randBox(1);return t}(e);console.time("bulk-insert "+e+" items"),l.load(t),console.timeEnd("bulk-insert "+e+" items"),draw()}}genBulkInsert(1e5)(),document.getElementById("insert1").onclick=genBulkInsert(5e4),document.getElementById("insert2").onclick=genBulkInsert(1e3),document.getElementById("insert3").onclick=genBulkInsert(5e4),document.getElementById("insert4").onclick=genBulkInsert(1e3),document.getElementById("canvas").onclick=function search(e){console.time("1 pixel search"),l.search({minX:e.clientX,minY:e.clientY,maxX:e.clientX+1,maxY:e.clientY+1}),console.timeEnd("1 pixel search")},document.getElementById("remove").onclick=function remove(){console.time("all ");const e=l.all();console.timeEnd("all "),console.time("sort "),e.sort(l.compareMinX),console.timeEnd("sort "),console.time("remove 10000");for(let t=0;t<1e4;t++)l.remove(e[t]);console.timeEnd("remove 10000"),draw()}})),(e,t)=>(r(),o("div",null,l)))});export{s as default};
